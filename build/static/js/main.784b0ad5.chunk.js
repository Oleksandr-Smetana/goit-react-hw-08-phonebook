(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[2],{12:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b}));var r=n(7),c=n.n(r),a=n(15),u=n(5),i=n(13),o=n.n(i);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var s=Object(u.c)("contacts/fetchContacts",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,o.a.get("/contacts").then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),l=Object(u.c)("contacts/addContact",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,o.a.post("/contacts",t).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),b=Object(u.c)("contacts/deleteContact",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,o.a.delete("/contacts/".concat(t));case 4:return e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}())},17:function(e,t,n){e.exports={AppBar:"AppBar_AppBar__2sMQX",wrapper:"AppBar_wrapper__3nsc0",link:"AppBar_link__9A32T",activeLink:"AppBar_activeLink__2Wd-c",button:"AppBar_button__QoJaw"}},21:function(e,t,n){e.exports={authMenu:"AuthMenu_authMenu__2EL5N",link:"AuthMenu_link__HE2hJ",activeLink:"AuthMenu_activeLink__3ypKp"}},26:function(e,t,n){e.exports={userMenu:"UserMenu_userMenu__3SEAU",text:"UserMenu_text__Hzs1x",button:"UserMenu_button__1n1kB"}},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),c=Object(r.b)("contacts/changeFilter")},4:function(e,t,n){"use strict";n.d(t,"d",(function(){return b})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return d}));var r=n(7),c=n.n(r),a=n(15),u=n(5),i=n(13),o=n.n(i);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var s=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(){o.a.defaults.headers.common.Authorization=""},b=Object(u.c)("auth/register",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,o.a.post("/users/signup",t);case 4:return a=e.sent,u=a.data,s(u.token),e.abrupt("return",u);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),j=Object(u.c)("auth/login",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,o.a.post("/users/login",t);case 4:return a=e.sent,u=a.data,s(u.token),e.abrupt("return",u);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),f=Object(u.c)("auth/logout",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,o.a.post("/users/logout");case 4:l(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),d=Object(u.c)("auth/refresh",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState().auth.token,console.log(n),null!==r){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return s(r),e.prev=5,e.next=8,o.a.get("/users/current");case 8:return a=e.sent,u=a.data,e.abrupt("return",u);case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",n.rejectWithValue(e.t0));case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},42:function(e,t,n){e.exports={homePage:"HomePage_homePage__1YD-Y"}},77:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var r,c,a,u,i,o,s=n(0),l=n.n(s),b=n(19),j=n.n(b),f=n(14),d=n(8),p=n(40),O=n(5),h=n(16),v=(n(54),n(41)),x=n.n(v),k=n(3),m=n(43),g=n(9),_=n(30),w=n(12),y=Object(O.d)([],(r={},Object(k.a)(r,w.c.fulfilled,(function(e,t){return t.payload})),Object(k.a)(r,w.a.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(m.a)(e),[n])})),Object(k.a)(r,w.b.fulfilled,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),r)),A=Object(O.d)(!1,(c={},Object(k.a)(c,w.c.pending,(function(){return!0})),Object(k.a)(c,w.c.fulfilled,(function(){return!1})),Object(k.a)(c,w.c.rejected,(function(){return!1})),Object(k.a)(c,w.a.pending,(function(){return!0})),Object(k.a)(c,w.a.fulfilled,(function(){return!1})),Object(k.a)(c,w.a.rejected,(function(){return!1})),Object(k.a)(c,w.b.pending,(function(){return!0})),Object(k.a)(c,w.b.fulfilled,(function(){return!1})),Object(k.a)(c,w.b.rejected,(function(){return!1})),c)),L=Object(O.d)("",Object(k.a)({},_.a,(function(e,t){return t.payload}))),M=Object(g.b)({items:y,filter:L,loading:A}),N=n(4),B={name:null,email:null},W=Object(O.d)(B,(a={},Object(k.a)(a,N.d.fulfilled,(function(e,t){return t.payload.user})),Object(k.a)(a,N.b.fulfilled,(function(e,t){return t.payload.user})),Object(k.a)(a,N.c.fulfilled,(function(){return B})),Object(k.a)(a,N.a.fulfilled,(function(e,t){return t.payload})),a)),C=Object(O.d)(null,(u={},Object(k.a)(u,N.d.fulfilled,(function(e,t){return t.payload.token})),Object(k.a)(u,N.b.fulfilled,(function(e,t){return t.payload.token})),Object(k.a)(u,N.c.fulfilled,(function(){return null})),u)),U=Object(O.d)(!1,(i={},Object(k.a)(i,N.d.pending,(function(){return!1})),Object(k.a)(i,N.d.fulfilled,(function(){return!0})),Object(k.a)(i,N.d.rejected,(function(){return!1})),Object(k.a)(i,N.b.pending,(function(){return!1})),Object(k.a)(i,N.b.fulfilled,(function(){return!0})),Object(k.a)(i,N.b.rejected,(function(){return!1})),Object(k.a)(i,N.c.pending,(function(){return!0})),Object(k.a)(i,N.c.fulfilled,(function(){return!1})),Object(k.a)(i,N.c.rejected,(function(){return!0})),Object(k.a)(i,N.a.pending,(function(){return!1})),Object(k.a)(i,N.a.fulfilled,(function(){return!0})),Object(k.a)(i,N.a.rejected,(function(){return!1})),i)),V=Object(O.d)(!1,(o={},Object(k.a)(o,N.a.pending,(function(){return!0})),Object(k.a)(o,N.a.fulfilled,(function(){return!1})),Object(k.a)(o,N.a.rejected,(function(){return!1})),o)),z=Object(g.b)({user:W,token:C,isLoggedIn:U,isCurrentUser:V}),S={key:"user-token",storage:x.a,whitelist:["token"]},T=Object(O.a)({reducer:{contacts:M,auth:Object(h.g)(S,z)},middleware:function(e){return e({serializableCheck:{ignoredActions:[h.a,h.f,h.b,h.c,h.d,h.e]}})},devTools:!1}),E=Object(h.h)(T),P=(n(77),n(2)),H=n(29),J=function(e){return e.auth.user.name},I=function(e){return e.auth.user.email},R=function(e){return e.auth.isLoggedIn},Q=function(e){return e.auth.isCurrentUser},Y=n(21),D=n.n(Y),F=n(1);function K(){return Object(F.jsxs)("div",{className:D.a.authMenu,children:[Object(F.jsx)(f.b,{to:"register",className:function(e){return e.isActive?D.a.activeLink:D.a.link},children:"Registration"}),Object(F.jsx)(f.b,{to:"login",className:function(e){return e.isActive?D.a.activeLink:D.a.link},children:"Login"})]})}var X=n(26),q=n.n(X);function G(){var e=Object(d.b)(),t=Object(d.c)(J),n=Object(d.c)(I);return Object(F.jsxs)("div",{className:q.a.userMenu,children:[Object(F.jsx)("p",{className:q.a.text,children:"Welcome, ".concat(t,"! (").concat(n,")")}),Object(F.jsx)("button",{type:"button",className:q.a.button,onClick:function(){return e(Object(N.c)())},children:"Logout"})]})}var Z=n(17),$=n.n(Z);function ee(){var e=Object(d.c)(R);return Object(F.jsxs)("nav",{className:$.a.AppBar,children:[Object(F.jsxs)("div",{className:$.a.wrapper,children:[Object(F.jsx)(f.b,{exact:"true",to:"/",className:function(e){return e.isActive?$.a.activeLink:$.a.link},children:"Home"}),e&&Object(F.jsx)(f.b,{to:"/contacts",className:function(e){return e.isActive?$.a.activeLink:$.a.link},children:"Contacts"})]}),e?Object(F.jsx)(G,{}):Object(F.jsx)(K,{})]})}var te=n(42),ne=n.n(te);function re(){return Object(F.jsx)("h2",{className:ne.a.homePage,children:"Nice to see you here!"})}function ce(e){var t=e.children,n=e.redirectTo;return Object(d.c)(R)?t:Object(F.jsx)(P.a,{to:n})}function ae(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=e.redirectTo;return Object(d.c)(R)&&r?Object(F.jsx)(P.a,{to:c}):t}var ue=Object(s.lazy)((function(){return Promise.all([n.e(6),n.e(0)]).then(n.bind(null,111))})),ie=Object(s.lazy)((function(){return n.e(3).then(n.bind(null,112))})),oe=Object(s.lazy)((function(){return n.e(1).then(n.bind(null,113))}));function se(){var e=Object(d.b)(),t=Object(d.c)(Q);return Object(s.useEffect)((function(){return e(Object(N.a)())}),[e]),!t&&Object(F.jsxs)("div",{children:[Object(F.jsx)(ee,{}),Object(F.jsxs)(P.d,{children:[Object(F.jsx)(P.b,{exact:"true",path:"/",element:Object(F.jsx)(ae,{children:Object(F.jsx)(s.Suspense,{fallback:null,children:Object(F.jsx)(re,{})})})}),Object(F.jsx)(P.b,{path:"/register",element:Object(F.jsx)(ae,{restricted:!0,redirectTo:"/contacts",children:Object(F.jsx)(s.Suspense,{fallback:null,children:Object(F.jsx)(ie,{})})})}),Object(F.jsx)(P.b,{path:"/login",element:Object(F.jsx)(ae,{restricted:!0,redirectTo:"/contacts",children:Object(F.jsx)(s.Suspense,{fallback:null,children:Object(F.jsx)(oe,{})})})}),Object(F.jsx)(P.b,{path:"/contacts",element:Object(F.jsx)(ce,{redirectTo:"/login",children:Object(F.jsx)(s.Suspense,{fallback:null,children:Object(F.jsx)(ue,{})})})}),Object(F.jsx)(P.b,{path:"*",element:Object(F.jsx)("h1",{children:"Error 404: Page not found."})})]}),Object(F.jsx)(H.a,{autoClose:3e3,position:"top-center",theme:"colored"})]})}j.a.render(Object(F.jsx)(l.a.StrictMode,{children:Object(F.jsx)(d.a,{store:T,children:Object(F.jsx)(p.a,{loading:null,persistor:E,children:Object(F.jsx)(f.a,{children:Object(F.jsx)(se,{})})})})}),document.getElementById("root"))}},[[79,4,5]]]);
//# sourceMappingURL=main.784b0ad5.chunk.js.map