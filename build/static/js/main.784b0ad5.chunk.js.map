{"version":3,"sources":["redux/contacts/contacts-operations.js","components/AppBar/AppBar.module.css","components/AuthMenu/AuthMenu.module.css","components/UserMenu/UserMenu.module.css","redux/contacts/contacts-actions.js","redux/auth/auth-operations.js","pages/HomePage/HomePage.module.css","redux/contacts/contacts-reducers.js","redux/auth/auth-reducers.js","redux/store.js","redux/auth/auth-selectors.js","components/AuthMenu/AuthMenu.js","components/UserMenu/UserMenu.js","components/AppBar/AppBar.js","pages/HomePage/HomePage.js","components/Routes/PrivateRoute.js","components/Routes/PublicRoute.js","App.js","index.js"],"names":["axios","defaults","baseURL","fetchContacts","createAsyncThunk","_","a","rejectWithValue","get","then","data","addContact","contact","post","deleteContact","contactId","delete","module","exports","changeFilter","createAction","token","headers","common","Authorization","register","registrationData","logIn","loginData","logOut","fetchCurrentUser","ThunkAPI","persistedToken","getState","auth","console","log","items","createReducer","fulfilled","payload","state","filter","id","loading","pending","rejected","combineReducers","initialUserState","name","email","userReducer","user","tokenReducer","isLoggedIn","isCurrentUser","tokenPersistConfig","key","storage","whitelist","store","configureStore","reducer","contacts","contactsReducers","persistReducer","authReducers","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","devTools","process","persistor","persistStore","getUserName","getUserEmail","getStatus","getCurrentUser","AuthMenu","className","s","authMenu","to","isActive","activeLink","link","UserMenu","dispatch","useDispatch","useSelector","userMenu","text","type","button","onClick","AppBar","wrapper","exact","HomePage","homePage","PrivateRoute","children","redirectTo","PublicRoute","restricted","ContactsPage","lazy","RegisterPage","LoginPage","App","isFetchingCurrentUser","useEffect","path","element","fallback","autoClose","position","theme","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.784b0ad5.chunk.js","sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\naxios.defaults.baseURL =\r\n  'https://connections-api.herokuapp.com';\r\n\r\nexport const fetchContacts = createAsyncThunk(\r\n  'contacts/fetchContacts',\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      return await axios\r\n        .get('/contacts')\r\n        .then(({ data }) => data);\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const addContact = createAsyncThunk(\r\n  'contacts/addContact',\r\n  async (contact, { rejectWithValue }) => {\r\n    try {\r\n      return await axios\r\n        .post('/contacts', contact)\r\n        .then(({ data }) => data);\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const deleteContact = createAsyncThunk(\r\n  'contacts/deleteContact',\r\n  async (contactId, { rejectWithValue }) => {\r\n    try {\r\n      await axios.delete(`/contacts/${contactId}`);\r\n      return contactId;\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AppBar\":\"AppBar_AppBar__2sMQX\",\"wrapper\":\"AppBar_wrapper__3nsc0\",\"link\":\"AppBar_link__9A32T\",\"activeLink\":\"AppBar_activeLink__2Wd-c\",\"button\":\"AppBar_button__QoJaw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"authMenu\":\"AuthMenu_authMenu__2EL5N\",\"link\":\"AuthMenu_link__HE2hJ\",\"activeLink\":\"AuthMenu_activeLink__3ypKp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userMenu\":\"UserMenu_userMenu__3SEAU\",\"text\":\"UserMenu_text__Hzs1x\",\"button\":\"UserMenu_button__1n1kB\"};","import { createAction } from '@reduxjs/toolkit';\r\n\r\nexport const changeFilter = createAction(\r\n  'contacts/changeFilter',\r\n);\r\n","import { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\naxios.defaults.baseURL =\r\n  'https://connections-api.herokuapp.com';\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\nexport const register = createAsyncThunk(\r\n  'auth/register',\r\n  async (registrationData, { rejectWithValue }) => {\r\n    try {\r\n      const { data } = await axios.post(\r\n        '/users/signup',\r\n        registrationData,\r\n      );\r\n      token.set(data.token);\r\n\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const logIn = createAsyncThunk(\r\n  'auth/login',\r\n  async (loginData, { rejectWithValue }) => {\r\n    try {\r\n      const { data } = await axios.post(\r\n        '/users/login',\r\n        loginData,\r\n      );\r\n      token.set(data.token);\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const logOut = createAsyncThunk(\r\n  'auth/logout',\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      await axios.post('/users/logout');\r\n      token.unset();\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const fetchCurrentUser = createAsyncThunk(\r\n  'auth/refresh',\r\n  async (_, ThunkAPI) => {\r\n    const persistedToken = ThunkAPI.getState().auth.token;\r\n    console.log(ThunkAPI);\r\n\r\n    if (persistedToken === null) {\r\n      return ThunkAPI.rejectWithValue();\r\n    }\r\n\r\n    token.set(persistedToken);\r\n    try {\r\n      const { data } = await axios.get('/users/current');\r\n      return data;\r\n    } catch (error) {\r\n      return ThunkAPI.rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"homePage\":\"HomePage_homePage__1YD-Y\"};","import {\r\n  createReducer,\r\n  combineReducers,\r\n} from '@reduxjs/toolkit';\r\n\r\nimport { changeFilter } from './contacts-actions';\r\nimport {\r\n  fetchContacts,\r\n  addContact,\r\n  deleteContact,\r\n} from './contacts-operations';\r\n\r\nconst items = createReducer([], {\r\n  [fetchContacts.fulfilled]: (_, { payload }) => payload,\r\n  [addContact.fulfilled]: (state, { payload }) => [\r\n    ...state,\r\n    payload,\r\n  ],\r\n  [deleteContact.fulfilled]: (state, { payload }) => {\r\n    return state.filter(contact => contact.id !== payload);\r\n  },\r\n});\r\n\r\nconst loading = createReducer(false, {\r\n  [fetchContacts.pending]: () => true,\r\n  [fetchContacts.fulfilled]: () => false,\r\n  [fetchContacts.rejected]: () => false,\r\n\r\n  [addContact.pending]: () => true,\r\n  [addContact.fulfilled]: () => false,\r\n  [addContact.rejected]: () => false,\r\n\r\n  [deleteContact.pending]: () => true,\r\n  [deleteContact.fulfilled]: () => false,\r\n  [deleteContact.rejected]: () => false,\r\n});\r\n\r\nconst filter = createReducer('', {\r\n  [changeFilter]: (_, { payload }) => payload,\r\n});\r\n\r\nexport default combineReducers({\r\n  items,\r\n  filter,\r\n  loading,\r\n});\r\n","import {\r\n  createReducer,\r\n  combineReducers,\r\n} from '@reduxjs/toolkit';\r\n\r\nimport {\r\n  register,\r\n  logIn,\r\n  logOut,\r\n  fetchCurrentUser,\r\n} from './auth-operations';\r\n\r\nconst initialUserState = { name: null, email: null };\r\n\r\nconst userReducer = createReducer(initialUserState, {\r\n  [register.fulfilled]: (_, { payload }) => payload.user,\r\n  [logIn.fulfilled]: (_, { payload }) => payload.user,\r\n  [logOut.fulfilled]: () => initialUserState,\r\n  [fetchCurrentUser.fulfilled]: (_, { payload }) => payload,\r\n});\r\n\r\nconst tokenReducer = createReducer(null, {\r\n  [register.fulfilled]: (_, { payload }) => payload.token,\r\n  [logIn.fulfilled]: (_, { payload }) => payload.token,\r\n  [logOut.fulfilled]: () => null,\r\n});\r\n\r\nconst isLoggedIn = createReducer(false, {\r\n  [register.pending]: () => false,\r\n  [register.fulfilled]: () => true,\r\n  [register.rejected]: () => false,\r\n\r\n  [logIn.pending]: () => false,\r\n  [logIn.fulfilled]: () => true,\r\n  [logIn.rejected]: () => false,\r\n\r\n  [logOut.pending]: () => true,\r\n  [logOut.fulfilled]: () => false,\r\n  [logOut.rejected]: () => true,\r\n\r\n  [fetchCurrentUser.pending]: () => false,\r\n  [fetchCurrentUser.fulfilled]: () => true,\r\n  [fetchCurrentUser.rejected]: () => false,\r\n});\r\n\r\nconst isCurrentUser = createReducer(false, {\r\n  [fetchCurrentUser.pending]: () => true,\r\n  [fetchCurrentUser.fulfilled]: () => false,\r\n  [fetchCurrentUser.rejected]: () => false,\r\n});\r\n\r\nexport default combineReducers({\r\n  user: userReducer,\r\n  token: tokenReducer,\r\n  isLoggedIn,\r\n  isCurrentUser,\r\n});\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from 'redux-persist';\r\nimport logger from 'redux-logger';\r\nimport storage from 'redux-persist/lib/storage';\r\n\r\nimport contactsReducers from './contacts/contacts-reducers';\r\nimport authReducers from './auth/auth-reducers';\r\n\r\nconst getMiddleware = getDefaultMiddleware =>\r\n  process.env.NODE_ENV === 'development'\r\n    ? getDefaultMiddleware({\r\n        serializableCheck: {\r\n          ignoredActions: [\r\n            FLUSH,\r\n            REHYDRATE,\r\n            PAUSE,\r\n            PERSIST,\r\n            PURGE,\r\n            REGISTER,\r\n          ],\r\n        },\r\n      }).concat(logger)\r\n    : getDefaultMiddleware({\r\n        serializableCheck: {\r\n          ignoredActions: [\r\n            FLUSH,\r\n            REHYDRATE,\r\n            PAUSE,\r\n            PERSIST,\r\n            PURGE,\r\n            REGISTER,\r\n          ],\r\n        },\r\n      });\r\n\r\nconst tokenPersistConfig = {\r\n  key: 'user-token',\r\n  storage,\r\n  whitelist: ['token'],\r\n};\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    contacts: contactsReducers,\r\n    auth: persistReducer(tokenPersistConfig, authReducers),\r\n  },\r\n  middleware: getMiddleware,\r\n  devTools: process.env.NODE_ENV === 'development', // devTools применяются тлько в разработке\r\n});\r\n\r\nexport const persistor = persistStore(store);\r\n","export const getUserName = state => state.auth.user.name;\r\nexport const getUserEmail = state => state.auth.user.email;\r\nexport const getToken = state => state.auth.token;\r\nexport const getStatus = state => state.auth.isLoggedIn;\r\nexport const getCurrentUser = state =>\r\n  state.auth.isCurrentUser;\r\n","import { NavLink } from 'react-router-dom';\r\n\r\nimport s from './AuthMenu.module.css';\r\n\r\nexport default function AuthMenu() {\r\n  return (\r\n    <div className={s.authMenu}>\r\n      <NavLink\r\n        to=\"register\"\r\n        className={({ isActive }) =>\r\n          isActive ? s.activeLink : s.link\r\n        }\r\n      >\r\n        Registration\r\n      </NavLink>\r\n\r\n      <NavLink\r\n        to=\"login\"\r\n        className={({ isActive }) =>\r\n          isActive ? s.activeLink : s.link\r\n        }\r\n      >\r\n        Login\r\n      </NavLink>\r\n    </div>\r\n  );\r\n}\r\n","import { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  getUserName,\r\n  getUserEmail,\r\n} from '../../redux/auth/auth-selectors';\r\nimport { logOut } from '../../redux/auth/auth-operations';\r\n\r\nimport s from './UserMenu.module.css';\r\n\r\nexport default function UserMenu() {\r\n  const dispatch = useDispatch();\r\n\r\n  const name = useSelector(getUserName);\r\n  const email = useSelector(getUserEmail);\r\n\r\n  const onLogOut = () => dispatch(logOut());\r\n\r\n  return (\r\n    <div className={s.userMenu}>\r\n      <p\r\n        className={s.text}\r\n      >{`Welcome, ${name}! (${email})`}</p>\r\n\r\n      <button\r\n        type=\"button\"\r\n        className={s.button}\r\n        onClick={onLogOut}\r\n      >\r\n        Logout\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { getStatus } from '../../redux/auth/auth-selectors';\r\nimport AuthMenu from '../AuthMenu';\r\nimport UserMenu from '../UserMenu';\r\n\r\nimport s from './AppBar.module.css';\r\n\r\nexport default function AppBar() {\r\n  const isLoggedIn = useSelector(getStatus);\r\n\r\n  return (\r\n    <nav className={s.AppBar}>\r\n      <div className={s.wrapper}>\r\n        <NavLink\r\n          exact=\"true\"\r\n          to=\"/\"\r\n          className={({ isActive }) =>\r\n            isActive ? s.activeLink : s.link\r\n          }\r\n        >\r\n          Home\r\n        </NavLink>\r\n\r\n        {isLoggedIn && (\r\n          <NavLink\r\n            to=\"/contacts\"\r\n            className={({ isActive }) =>\r\n              isActive ? s.activeLink : s.link\r\n            }\r\n          >\r\n            Contacts\r\n          </NavLink>\r\n        )}\r\n      </div>\r\n\r\n      {isLoggedIn ? <UserMenu /> : <AuthMenu />}\r\n    </nav>\r\n  );\r\n}\r\n","import s from './HomePage.module.css';\r\n\r\nexport default function HomePage() {\r\n  return (\r\n    <h2 className={s.homePage}>Nice to see you here!</h2>\r\n  );\r\n}\r\n","import PropTypes from 'prop-types';\r\nimport { useSelector } from 'react-redux';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nimport { getStatus } from '../../redux/auth/auth-selectors';\r\n\r\nexport default function PrivateRoute({\r\n  children,\r\n  redirectTo,\r\n}) {\r\n  const status = useSelector(getStatus);\r\n  return status ? children : <Navigate to={redirectTo} />;\r\n}\r\n\r\nPrivateRoute.propTypes = {\r\n  children: PropTypes.object.isRequired,\r\n  redirectTo: PropTypes.string,\r\n};\r\n","import PropTypes from 'prop-types';\r\nimport { useSelector } from 'react-redux';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nimport { getStatus } from '../../redux/auth/auth-selectors';\r\n\r\nexport default function PublicRoute({\r\n  children,\r\n  restricted = false,\r\n  redirectTo,\r\n}) {\r\n  const status = useSelector(getStatus);\r\n  const shouldRedirect = status && restricted;\r\n  return shouldRedirect ? (\r\n    <Navigate to={redirectTo} />\r\n  ) : (\r\n    children\r\n  );\r\n}\r\n\r\nPublicRoute.propTypes = {\r\n  children: PropTypes.object.isRequired,\r\n  restricted: PropTypes.bool,\r\n  redirectTo: PropTypes.string,\r\n};\r\n","import { useEffect, lazy, Suspense } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Route, Routes } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\n\nimport AppBar from './components/AppBar';\nimport HomePage from './pages/HomePage';\nimport PrivateRoute from './components/Routes/PrivateRoute';\nimport PublicRoute from './components/Routes/PublicRoute';\nimport { fetchCurrentUser } from './redux/auth/auth-operations';\nimport { getCurrentUser } from './redux/auth/auth-selectors';\n\nconst ContactsPage = lazy(() =>\n  import(\n    './pages/ContactsPage' /* webpackChunkName: \"contacts-page\" */\n  ),\n);\nconst RegisterPage = lazy(() =>\n  import(\n    './pages/RegisterPage' /* webpackChunkName: \"register-page\" */\n  ),\n);\nconst LoginPage = lazy(() =>\n  import(\n    './pages/LoginPage' /* webpackChunkName: \"login-page\" */\n  ),\n);\n\nexport default function App() {\n  const dispatch = useDispatch();\n  const isFetchingCurrentUser = useSelector(getCurrentUser);\n  // console.log(isFetchingCurrentUser);\n\n  useEffect(() => dispatch(fetchCurrentUser()), [dispatch]);\n\n  return (\n    !isFetchingCurrentUser && (\n      <div>\n        <AppBar />\n\n        <Routes>\n          <Route\n            exact=\"true\"\n            path=\"/\"\n            element={\n              <PublicRoute>\n                <Suspense fallback={null}>\n                  <HomePage />\n                </Suspense>\n              </PublicRoute>\n            }\n          />\n          <Route\n            path=\"/register\"\n            element={\n              <PublicRoute\n                restricted\n                redirectTo={'/contacts'}\n              >\n                <Suspense fallback={null}>\n                  <RegisterPage />\n                </Suspense>\n              </PublicRoute>\n            }\n          />\n          <Route\n            path=\"/login\"\n            element={\n              <PublicRoute\n                restricted\n                redirectTo={'/contacts'}\n              >\n                <Suspense fallback={null}>\n                  <LoginPage />\n                </Suspense>\n              </PublicRoute>\n            }\n          />\n          <Route\n            path=\"/contacts\"\n            element={\n              <PrivateRoute redirectTo={'/login'}>\n                <Suspense fallback={null}>\n                  <ContactsPage />\n                </Suspense>\n              </PrivateRoute>\n            }\n          />\n          <Route\n            path=\"*\"\n            element={<h1>Error 404: Page not found.</h1>}\n          />\n        </Routes>\n\n        <ToastContainer\n          autoClose={3000}\n          position=\"top-center\"\n          theme=\"colored\"\n        />\n      </div>\n    )\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { store, persistor } from './redux/store';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}